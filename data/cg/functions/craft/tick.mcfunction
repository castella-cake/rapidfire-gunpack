execute as @a at @s if entity @e[type=item,nbt={Item:{"id":"minecraft:iron_ingot",Count:1b}},distance=..3] as @e[type=item,nbt={Item:{"id":"minecraft:iron_ingot",Count:1b}},distance=..3] at @s if block ~ ~-1 ~ smithing_table if entity @e[type=item,nbt={Item:{"id":"minecraft:copper_ingot",Count:1b}},distance=..1] if entity @e[type=item,nbt={Item:{"id":"minecraft:gunpowder",Count:1b}},distance=..1] run function cg:craft/item/ammo_sml